<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
     
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
     
      crossorigin="anonymous"
      
    />

    
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css"
    />
<style>
    

</style>
   
  </head>

  <style>
    .center {
      display: flex;
      justify-content: center;
      margin: 0 auto !important;
    }
 
  </style>
  <body>


   
    <div class="container my-3">
 
      <h1 class="text-dark p-3">Employees</h1>

    
        <div
          class="modal fade"
          id="modalLoginForm"
          tabindex="-1"
          role="dialog"
          aria-labelledby="myModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Employee form</h4>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body mx-3">
                <div class="md-form mb-5">
                  <form action="/addEmployees" method="post">
                  <i class="fas fa-envelope prefix grey-text"></i>
                  <label
                  data-error="wrong"
                  data-success="right"
                  for="defaultForm-email"
                  >Employee Name</label
                >
                  <input
                    type="text"
                    id="defaultForm-email"
                    class="form-control validate"
                    name="EmployeeName"
                    required
                  />
                 
                </div>

                <div class="md-form mb-4">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <label
                    data-error="wrong"
                    data-success="right"
                    for="defaultForm-pass"
                    >Employee Email</label
                  >
                  <input
                    type="email"
                    id="defaultForm-pass"
                    name="Email"
                    class="form-control validate"
                    required
                  />
                  
                </div>

                <div class="md-form mb-4">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <label
                    data-error="wrong"
                    data-success="right"
                    for="defaultForm-pass"
                    >Employee Salary</label
                  >
                  <input
                    type="text"
                    id="defaultForm-pass"
                    name="Salary"
                    class="form-control validate"
                    required
                  />
                  
                </div>
                
              
              </div>
              <div class="modal-footer " style="right:10px;">
                 <button class="btn btn-danger " type="submit">Submit</button></a>
              </div>
            </form>
            </div>
          </div>
        </div>
     
      <div class="text-center bg-light text-color white">
        <button type="button" class="btn btn-secondary btn-lg btn-block" data-toggle="modal" data-target="#modalLoginForm">ADD Employees</button>
       
      </div>
      <form action="/update" method="post">
        <div
          class="modal fade"
          id="modalEditForm"
          tabindex="-1"
          role="dialog"
          aria-labelledby="myModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Edit Employee form</h4>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body mx-3" >
                <div class="md-form mb-5" id="epx">
                  <i class="fas fa-envelope prefix grey-text"></i>
                  <label
                  data-error="wrong"
                  data-success="right"
                  for="defaultForm-email"
                  >Employee Name</label
                >
                 
                 
                </div>

                <div class="md-form mb-4" id="xyz">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <label
                    data-error="wrong"
                    data-success="right"
                    for="defaultForm-pass"
                    >Employee Email</label
                  >
                  
                  
                </div>

                <div class="md-form mb-4" id="aab">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <label
                    data-error="wrong"
                    data-success="right"
                    for="defaultForm-pass"
                    >Employee Salary</label
                  >
                  
                  
                </div>
                <div class="md-form mb-4" id="raka">

                </div>
                
              
              </div>
              <div class="modal-footer d-flex justify-content-center">
                 <button class="btn btn-default" type="submit">Update</button>
              
              </div>
            </div>
          </div>
        </div>
      </form>
      <div class="container mt-3">
        
      <select class="justify-custom-center" onclick="select()" id="dropdown">
        <option selected value="2">2</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
      </select>
     
    </form>
    </div>
     
     <label for="name">Search</label>  
      <input type="text" name="name" class="center" id="name" placeholder="search by Name.." > 
    
    
  
   <table id="tablefields">
      <thead>
        <tr>
            <th>EmployeeName</th>
            <th>Email</th>
            <th>Salary</th>
            <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% detail.forEach(function(item){ %>
    <tr>
        <td><%= item.EmployeeName%></td>
        <td><%= item.Email%></td>
        <td><%= item.Salary%></td>
        <td><button type="button" class="btn btn-primary" id ="edit"  data-toggle = "modal" data-target = "#modalEditForm"  data-id = "<%=item._id%>">Edit</button>
          <button type="button" class="btn btn-danger delete" data-target="#exampleModal" data-toggle="modal" data-id = "<%=item._id%>">Delete</button> </td>

    </tr>
    <% }) %>
      </tbody>
      </table>
   
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <% if(current != 1){%>
          <li class="page-item">
            <a class="page-link" href="/pagin/<%= current - 1%>">Previous</a>
          </li>
          <% } %>
          <% for ( var i = 1; i <= result; i++){%>
          <li class="page-item"><a class="page-link" href="/pagin/<%= i%>"><%= i %></a></li>
         <% } %>
         <% if(current != result){%>
         <li class="page-item">
          <a class="page-link" href="/pagin/<%= current + 1%>">Next</a>
        </li>
        <% } %>
        </ul>
      </nav>
   <form action="delete" method="post">
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Delete Employee</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="abc">
            <p> Are you sure</p> 
             
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    </div>
  
   
    
    <script
 
      src="https://code.jquery.com/jquery-3.4.1.min.js"
    
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      
      crossorigin="anonymous"
    ></script>

  
    <script
    
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
     
      crossorigin="anonymous"
     
    ></script>

  
    <script
      src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"
    >
    </script>
    <script
      src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js">
    </script>
    <script>
      function select(){
        var value = $('#dropdown').val();
      console.log("values",value)//
      $.ajax({
        url : '/pagin',
        type : 'POST',
        data : {data :value}
      })
      }
     
      $('#name').keyup(function(){
        var input1= $('#name').val();
        console.log(input1)
        $.ajax({
            url: "/data",
            type: "POST",
            data : {action : input1},
            success : function(data){
              console.log("object",data)
             
              $('#tablefields tbody' ).html(html)
            }
          })
      })
        $(document).ready(function(){
            
            $(document).on('click','.delete',function(e){
                var del = $(this).data('id')
                console.log("object",del)

                $('#abc').append('<input name="abc" type = "text" value="'+del+'" />')
            })
       
        
          })
        
          $(document).on('click','#edit',function(){
              var asd = $(this).data('id')
           
              $.ajax({
                url: "/edit",
                type: "post",
                data : {action: asd},
               success :function(data){
                console.log("Akas",data)
                if(data){

                $('#epx').append('  <input type="text" class="form-control validate" name="EmployeeName" value = "'+data.EmployeeName+'" required  />')
                $('#xyz').append('  <input type="text" class="form-control validate" name="Email" value = "'+data.Email+'" required  />')
                $('#aab').append('  <input type="text" class="form-control validate" name="Salary" value = "'+data.Salary+'" required  />')
                $('#raka').append('  <input type="text" class="form-control validate" name="id" value = "'+asd+'" required  />')
                }                  


            
             
                    
                   
                   
                  
                    
                   
                
               }
              })
        
       
            })

    </script>

  </body>
</html>
